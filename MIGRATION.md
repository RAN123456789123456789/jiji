# 重构说明

## 重构内容

项目已从单一文件结构重构为模块化架构，主要变化如下：

### 目录结构变化

**之前：**
```
老吉游戏/
├── index.html
├── script.js      (所有代码在一个文件)
├── styles.css     (所有样式在一个文件)
└── README.md
```

**现在：**
```
老吉游戏/
├── index.html
├── src/           (源代码目录)
│   ├── config/    (配置模块)
│   ├── core/      (核心功能)
│   ├── game/      (游戏逻辑)
│   ├── physics/   (物理系统)
│   ├── models/    (模型管理)
│   ├── ui/        (UI模块)
│   └── main.js    (主入口)
├── styles/        (样式文件)
├── assets/        (资源文件)
└── README.md
```

### 主要改进

1. **模块化设计**
   - 每个功能独立成模块
   - 高可复用性
   - 易于维护和扩展

2. **前后端分离**
   - UI模块（`src/ui/`）负责界面
   - 游戏逻辑（`src/game/`）负责后端功能
   - 互不影响

3. **模型管理系统**
   - 统一的模型管理接口
   - 支持多种模型格式
   - 易于替换和扩展

4. **配置集中管理**
   - 所有配置集中在 `src/config/`
   - 易于修改和调整

### 功能保持不变

所有原有功能都保持不变：
- ✅ 6个关卡场景
- ✅ 第一人称视角控制
- ✅ 背包系统
- ✅ 道具系统
- ✅ 碰撞检测
- ✅ 宝藏收集

### 如何使用新结构

1. **直接运行**：打开 `index.html` 即可，功能完全一致

2. **添加模型**：
   - 将模型放入 `assets/models/` 对应目录
   - 在 `src/main.js` 中注册模型
   - 使用 `ModelManager` 加载模型

3. **扩展功能**：
   - 添加新模块到对应目录
   - 在 `src/main.js` 中集成
   - 遵循模块化设计原则

### 注意事项

- 旧文件 `script.js` 和 `styles.css` 已被删除
- 新代码使用ES6模块（import/export）
- 需要在支持ES6模块的浏览器中运行
- 或使用本地服务器运行（推荐）

### 运行方式

**方式1：直接打开**
- 现代浏览器支持ES6模块，可以直接打开 `index.html`

**方式2：使用本地服务器（推荐）**
```bash
# 使用Python
python -m http.server 8000

# 使用Node.js
npx http-server

# 然后访问 http://localhost:8000
```

### 迁移指南

如果你有自定义代码，需要迁移到新结构：

1. **配置修改** → `src/config/`
2. **游戏逻辑** → `src/game/`
3. **UI相关** → `src/ui/`
4. **3D场景** → `src/core/SceneManager.js`
5. **物理系统** → `src/physics/`

### 优势

- ✅ 代码组织更清晰
- ✅ 易于团队协作
- ✅ 便于单元测试
- ✅ 更好的代码复用
- ✅ 更容易添加新功能

